<div id="main-container" class="main-container">
  <h1>Hi <%= current_user.first_name %>, this is your Dashboard</h1>

  <%= link_to "logout", destroy_user_session_path, data: { turbo_method: :delete }  %>

  <h2>Your instruments</h2>
  <div>
    <% if @instruments.empty? %>
      <p>You don't have any instruments</p>
    <% end %>
    <%= link_to "Add a new instrument", new_instrument_path %>
    <div class="cards-grid">
      <% @instruments.each do |instrument| %>
        <%= link_to instrument_path(instrument) do %>
          <div class="card-instrument">
            <%= image_tag instrument.image_url, alt: "Image of #{instrument.category}", height: 400 %>
            <div class="d-flex align-items-center justify-content-center ">
              <div class="text-center">
                <h2><%= instrument.category %> <%= instrument.brand %></h2>
                <h3><%= instrument.daily_price.to_i %> â‚¬ per day</h3>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>

  <h2>Bookings of your instruments</h2>

  <% @instruments.each do |instrument| %>

    <ul>
      <% instrument.bookings.each do |booking| %>
        <li>Booked by <%= booking.user.first_name %> (<%= booking.user.email %>)</li>
        <%= link_to "Cancel booking", booking_path(booking), data: { turbo_method: :delete } %>

      <% end %>
    </ul>
  <% end %>


  <h2>Your bookings of other people's instruments</h2>

  <ul>
    <% @bookings.each do |booking| %>
      <li class="my-5">
        <p>You've booked <%= booking.instrument.category %>-<%= booking.instrument.id %></p>
        <p>The instrument is owned by: <%= booking.instrument.user.first_name %></p>
        <p>You are renting this instrument from <%= booking.start_date %> until <%= booking.end_date %></p>
        <%= link_to "Cancel booking", booking_path(booking), data: { turbo_method: :delete } %>
      </li>
    <% end %>
  </ul>
</div>
